{"ast":null,"code":"var _jsxFileName = \"/home/pc/Escritorio/proyecto final/MentoringApp/client/src/views/Principal/PrincipalView.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport axios from 'axios';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { dispatchGetUser, dispatchLogin, fetchUser } from '../../redux/actions/authActions';\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PrincipalView = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const token = useSelector(state => state.token);\n  const auth = useSelector(state => state.auth);\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedAgoraUser');\n    const firstLogin = localStorage.getItem('firstLogin'); // console.log(firstLogin && loggedUserJSON)\n\n    if (firstLogin && loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON);\n      const refreshtoken = user.refresh_token;\n\n      const getToken = async () => {\n        const res = await axios.post('http://localhost:3001/api/refresh_token', {\n          refreshtoken\n        }); // console.log(res)\n\n        dispatch({\n          type: 'GET_TOKEN',\n          payload: res.data.access_token\n        });\n      };\n\n      getToken();\n    }\n  }, [auth.isLogged, dispatch]);\n  useEffect(() => {\n    if (token) {\n      // console.log(token, \"user\")\n      const getUser = () => {\n        dispatch(dispatchLogin());\n        return fetchUser(token).then(res => {\n          dispatch(dispatchGetUser(res));\n        });\n      };\n\n      getUser();\n    }\n  }, [token, dispatch]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Bienvenido Usuario gen\\xE9rico\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/welcome-user\",\n      children: \"| Pagina Bienvenida Usuario |\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/welcome-student\",\n      children: \"| Pagina Bienvenida estudiante |\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/student-profile-interests\",\n      children: \"| Perfil de estudiante |\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/student-sessions\",\n      children: \"| Sesiones |\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/AdminPanel\",\n      children: \"| admin |\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/admin-panel\",\n      children: \"| admin |\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/WelcomeCard\",\n      children: \"| WelcomeCard |\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/CrudStudents\",\n      children: \"| CrudStudents |\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/MultipleChoice\",\n      children: \"| MultipleChoice |\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PrincipalView, \"ktawS+ubDSYtBWRpfP+berKS1yM=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = PrincipalView;\nexport default PrincipalView;\n\nvar _c;\n\n$RefreshReg$(_c, \"PrincipalView\");","map":{"version":3,"sources":["/home/pc/Escritorio/proyecto final/MentoringApp/client/src/views/Principal/PrincipalView.jsx"],"names":["React","useEffect","axios","useDispatch","useSelector","dispatchGetUser","dispatchLogin","fetchUser","Link","PrincipalView","dispatch","token","state","auth","loggedUserJSON","window","localStorage","getItem","firstLogin","user","JSON","parse","refreshtoken","refresh_token","getToken","res","post","type","payload","data","access_token","isLogged","getUser","then"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\nimport axios from 'axios'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { dispatchGetUser, dispatchLogin, fetchUser } from '../../redux/actions/authActions'\nimport { Link } from \"react-router-dom\"\n\nconst PrincipalView = () => {\n\n  const dispatch = useDispatch()\n  const token = useSelector(state => state.token)\n  const auth = useSelector(state => state.auth)\n\n\n  useEffect(()=> {\n    const loggedUserJSON = window.localStorage.getItem('loggedAgoraUser')\n    const firstLogin = localStorage.getItem('firstLogin')\n    // console.log(firstLogin && loggedUserJSON)\n    if(firstLogin && loggedUserJSON){\n      const user = JSON.parse(loggedUserJSON)\n      const refreshtoken = user.refresh_token\n      \n      const getToken = async () =>{\n        const res = await axios.post('http://localhost:3001/api/refresh_token', {refreshtoken})\n        // console.log(res)\n        dispatch({type:'GET_TOKEN', payload: res.data.access_token})\n      }\n      getToken()\n      \n    }\n  }, [auth.isLogged, dispatch])\n\n\n  useEffect(()=> {\n    if(token){\n      // console.log(token, \"user\")\n      const getUser = () => {\n        dispatch(dispatchLogin())\n        return fetchUser(token).then(res => {\n          dispatch(dispatchGetUser(res))\n        })\n      }\n      getUser()\n    }\n    \n  }, [token, dispatch])\n\n\n    return (\n    <div className=\"App\">\n      <h1>Bienvenido Usuario gen√©rico</h1>\n      \n      \n      \n      <Link to=\"/welcome-user\">| Pagina Bienvenida Usuario |</Link>\n      <Link to=\"/welcome-student\">| Pagina Bienvenida estudiante |</Link>\n      <Link to=\"/student-profile-interests\">| Perfil de estudiante |</Link>\n      <Link to=\"/student-sessions\">| Sesiones |</Link>\n      <Link to=\"/AdminPanel\">| admin |</Link>\n      <Link to=\"/admin-panel\">| admin |</Link>\n      <Link to=\"/WelcomeCard\">| WelcomeCard |</Link>\n      <Link to=\"/CrudStudents\">| CrudStudents |</Link>\n      <Link to=\"/MultipleChoice\">| MultipleChoice |</Link>                                                \n    </div>  \n    )\n}\n\nexport default PrincipalView\n"]},"metadata":{},"sourceType":"module"}